{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/person.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["Filter","handleSearch","type","onChange","PersonForm","handleSubmit","handleName","handlePhone","newName","newPhone","onSubmit","value","Persons","searchList","handleDelete","map","person","key","name","phoneNo","onClick","axios","get","baseUrl","then","response","data","post","id","put","delete","Notification","props","className","message","Error","error","App","useState","persons","setPersons","setNewName","setNewPhone","setSearchList","setMessage","setErrorMsg","useEffect","personService","event","filterList","filter","toLowerCase","includes","target","preventDefault","phObj","number","find","window","confirm","existingPerson","console","log","setTimeout","catch","list","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.91028740.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ handleSearch }) => {\r\n    return (\r\n        <div>\r\n            filter shown with: <input type=\"text\" onChange={handleSearch} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm = ({ handleSubmit, handleName, handlePhone, newName, newPhone }) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                name: <input type=\"text\" value={newName} onChange={handleName} />\r\n            </div>\r\n            <div>\r\n                phone: <input type=\"number\" value={newPhone} onChange={handlePhone} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Persons = ({ searchList, handleDelete }) => {\r\n    return (\r\n        <div>\r\n            {searchList.map(person => {\r\n                return (\r\n                    <div key={person.name}>\r\n                        <p >{person.name} {person.phoneNo}</p>\r\n                        <button onClick={() => handleDelete(person)}>delete</button>\r\n                    </div>\r\n                )\r\n            })}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons;","import axios from 'axios';\r\nconst baseUrl = '/api/';\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl + 'persons');\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst createPhone = (person) => {\r\n    const request = axios.post(baseUrl + 'persons', person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst updatePhone = (id, person) => {\r\n    const request = axios.put(baseUrl + `persons/${id}`, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst deletePhone = (id) => {\r\n    const request = axios.delete(baseUrl + `persons/${id}`)\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    createPhone,\r\n    updatePhone,\r\n    deletePhone\r\n}","import React from 'react'\r\nimport './Notification.css';\r\n\r\nconst Notification = (props) => {\r\n    if (props === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"info\">\r\n            {props.message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification;","import React from 'react'\r\nimport './Error.css';\r\n\r\nconst Error = ({ error }) => {\r\n    if (error === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"error\">\r\n            {error}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Error;","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport personService from './services/person';\nimport Notification from './components/Notification';\nimport Error from './components/Error';\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('');\n  const [newPhone, setNewPhone] = useState('');\n  const [searchList, setSearchList] = useState(persons);\n  const [message, setMessage] = useState(null);\n  const [error, setErrorMsg] = useState(null);\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(data => {\n        setPersons(data);\n        setSearchList(data)\n      })\n  }, []);\n\n  const handleName = event => {\n    setNewName(event.target.value);\n  }\n\n  const handlePhone = event => {\n    event.preventDefault();\n    setNewPhone(event.target.value);\n  }\n\n  const handleSearch = event => {\n    const filterList = persons.filter(person => person.name.toLowerCase().includes(event.target.value));\n    setSearchList(filterList);\n  }\n  const handleSubmit = event => {\n\n    event.preventDefault();\n    const phObj = {\n      name: newName,\n      number: newPhone\n    }\n\n    if (persons.find(person => person.name === newName)) {\n      const confirm = window.confirm(`${newName} is already added to phonebook, replace the old number with new one`)\n      if (confirm) {\n        const existingPerson = persons.filter(person => person.name === newName);\n        console.log('Exit', existingPerson)\n        personService\n          .updatePhone(existingPerson[0].id, phObj)\n          .then(data => {\n            setPersons(persons.map(person => person.id !== existingPerson[0].id ? person : data))\n            setSearchList(searchList.map(person => person.id !== existingPerson[0].id ? person : data))\n\n            setMessage(`Added ${data.name}`);\n            setTimeout(\n              () => {\n                setMessage(null)\n              }, 5000\n            )\n          })\n          .catch(error => {\n            console.log('Error', error.response.data)\n            setErrorMsg(error.response.data.error)\n          })\n      }\n    } else {\n      personService\n        .createPhone(phObj)\n        .then(data => {\n          setPersons([\n            ...persons,\n            data\n          ]);\n          setSearchList([\n            ...searchList,\n            data\n          ]);\n          setMessage(`Added ${data.name}`);\n          setTimeout(\n            () => {\n              setMessage(null)\n            }, 5000\n          )\n        })\n        .catch(\n          error => {\n            console.log('error', error.response.data)\n            setErrorMsg(error.response.data.error)\n          }\n        )\n    }\n    setNewName('');\n    setNewPhone('');\n  }\n\n  const handleDelete = (person) => {\n    const deletePhone = window.confirm(`Delete ${person.name}?`)\n    if (deletePhone) {\n      personService\n        .deletePhone(person.id)\n        .then(data => {\n          const list = persons.filter(data => data.id !== person.id);\n          setPersons(list);\n          setSearchList(list);\n        })\n        .catch(error => {\n          setErrorMsg(`Infomartion of ${person.name} is already remove from the server`)\n          setTimeout(() => {\n            setErrorMsg(null)\n          }, 5000)\n        })\n\n    }\n\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {message && <Notification message={message} />}\n      {error && <Error error={error} />}\n      <Filter handleSearch={handleSearch} />\n      <h2>add a new</h2>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        handleName={handleName}\n        handlePhone={handlePhone}\n        newName={newName}\n        newPhone={newPhone}\n      />\n      <h2>Numbers</h2>\n      <Persons searchList={searchList} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}